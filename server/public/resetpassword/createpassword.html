<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <div class="form__wrapper">
    <h2 clas="form__h2">Change password</h2>
    <form class="form__form">
      <input type="text" name="email" placeholder="email" class="form__input" />
      <input type="text" name="newpassword" placeholder="new password" class="form__input__password" />
      <button type="submit" class="form__button">Send</button>
    </form>
  </div>

  <script defer>
    const button = document.querySelector('.form__button'); //catch button


    const form = document.querySelector('form');
    async function handleResetSubmit(event) {

      const email = document.querySelector('.form__input').value; // catch email

      // fetch(`http://localhost:12345/api/resetpassword/reset`)
      //   .then(res => {this.email=res})
      //   .catch(console.log("something wrong"))

      const newpassword = document.querySelector('.form__input__password').value;
      event.preventDefault(); //stop refresh
      const url = `http://localhost:12345/api/resetpassword/create?` + 'email=' + email + "&" + 'password=' +
        newpassword; //create url with param
      await fetch(url, {
        method: 'POST'
      }); //go to backend
    }
    form.addEventListener('submit', handleResetSubmit);
  </script>
</body>

</html>